<!DOCTYPE html>
<!-- saved from url=(0168)https://cdn5.dcbstatic.com/files/a/d/admi_docebosaas_com/1695949200/dSo6jUJ2JjR8EwpQGvQPvQ/scorm/97101d995e7ea4794f7efd60ce1a151cccc3cb20/story_content/procedure.html?1 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title></title>
<style>
	body { font-family: Arial; color: #0048bb; }
	table { border: solid 1px black; border-spacing: 0; border-collapse: collapse; width: 900px; }
	th { background-color: #0048bb; color: #fff; margin:0; padding:10px; }
	tbody td { text-align:center; white-space:nowrap; padding:10px; min-width: 100px; }
	tbody td.select { text-align:right; white-space:nowrap; padding:10px; min-width: 100px; }
	tbody tr:nth-child(odd) td { background-color: #bee5ff;  }
	select { padding: 10px; min-width:4em; font-size: 1em; text-align-last: center; }
	select.tooth { background-color: #92d050; }
	select.visit { background-color: #ffc000; }
	select.provider { background-color: #4bacc6; }
	span.redx { 
		display: inline-block;
		width:18px;
		height:18px;
		background: no-repeat url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAOGSURBVEhLnVXZS1RxFL5/R5SkLyLmiKnjNuqgOaioOZuzijNO7ttbURY9FFQkhEJFRiWFGaEVhVmKD5nbjJo2CmKLWvSQ5pampWK389342fVyzfLhG+bee873ne13fhzP8wKOBQfvb0pLq33ndK7PFxbyvWZz553k5ET2fTtUKhS+bVrt7fdOJz9TUMA/1WqfnIuKCmHfhZ9D/v57HmVk3Pqcl8evlpXxiyUl/Fp5Of/Kah2+qdFEM2MpKpVK3w69vnGOAlouLeVXCAtFRXy7TtdaqFAcgA3nCAzch8g/ulxrP4h8hoxnCTBcIqEBi8VTn5CglJKfAbnR2PSFol4qLhZ84LtCPlP0jrJ6djY6OoxrSEmp+eRybSByRs6wSI7Ips9s9txISopg5KdVMX4dBkMTSsLIGcCBbBbofatW28ZNOp2L61QOKTkz/goRQr/Z7K5SxYSm+/j4dhkMjXLkYj+ITJMNh1IgSjlDBojMk92g1drjNpsfT+Xnb0vOgKBQYq7baPSgoUhJzpBhjgRQxvWKCkFMzoYBQX+nDPotljGugUZx0G73fiM1RCpXqv8ByJeJa9hun3iYkqIXmnZZrY7vt1r7WL13K8LIvXb75IPUVB24N8euOj4+0m0y9QqTswsRRj5is03co8gZ76YAcE2tjvCQCA7OTnUWA/bIfiQ7e5xFzrBFALgQGXmQTnD3KjVejkwOOKBvHY7xq2r1YSnflgfgaFDQXowipkWOTA6YwjGH4/WJ8PAwKd+Wh4uxsb4v6RBhzlFTOTI5oJwoEw5jnWStbCF/QbtFOKHULDmivwE9AEjEc10k8occu4UMd0POwMYcu4uJcFcSE/0E8l1GLoWQCZUMmdRpNEquJTOzfvYfyLEqMC1o6E4jzDLpMho7uQ+5uRs4IHKGDGg4nN44HBOjOTlDeIdnqZ0YCBj3AkcXxk9cEtudXCxBtltqac6LFYoIqnEPE5XzYb3ExuWaMzObBRLaflIREOA9dsvd5GQDm4xLKlUEnRU3ai0VYeTwoxINcKeiosLb9fq2aZp9sQgTpcgnGzWazd0iFqG14hZnIpDTf/j2mExDVSpVmmB8JCAg8LlO14Lm4eJGg9BQr802eV8UuRQ1sbFKLEhkIpSEAH8i9x4PDU2CzabxybCwkFYSQSYwpH00Kt6K2+E8iWBa4IebsTsra7A6Li7993ee+wXAL9M355IukgAAAABJRU5ErkJggg==");
		background-size:18px;
		margin: auto 2px;
	}
	div.buttonContainer { width: 900px; text-align:right; padding-top: 1em  }
	span.hide { display: none; }
	#gradeButton {
		color: #fff;
		border: solid 1px #0467a2;
		background-color: #92d050;
		font-size: 1em;
		font-weight: bold;
		padding: 2px 8px;
	}
</style>
	</head>
	<body>
		<table>
			<thead>
				<tr>
					<th style="width:5em;">Tooth#/
							Arch</th>
					<th>CODE</th>
					<th style="width:40%;">Procedure Description</th>
					<th>Visit&nbsp;#</th>
					<th>Provider</th>
				</tr>
			</thead>
			<tbody id="tableBody"><tr><td class="select"><span id="0-tooth-redx" class="redx hide">&nbsp;</span><select class="tooth" id="0-tooth"><option>?</option><option></option><option>23</option><option>26</option><option>27</option><option>UA</option><option>LA</option></select></td><td>367</td><td>Cone Beam CT capture and interpret both jaws</td><td class="select"><span id="0-visit-redx" class="redx hide">&nbsp;</span><select class="visit" id="0-visit"><option>?</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></td><td class="select"><span id="0-provider-redx" class="redx hide">&nbsp;</span><select class="provider" id="0-provider" onchange="onProviderChange(this)"><option>?</option><option>MCD</option><option>OS</option></select></td></tr><tr><td class="select"><span id="1-tooth-redx" class="redx hide">&nbsp;</span><select class="tooth" id="1-tooth"><option>?</option><option></option><option>23</option><option>26</option><option>27</option><option>UA</option><option>LA</option></select></td><td>6104</td><td>Bone Graft at time of implant placement</td><td class="select"><span id="1-visit-redx" class="redx hide">&nbsp;</span><select class="visit" id="1-visit"><option>?</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></td><td class="select"><span id="1-provider-redx" class="redx hide">&nbsp;</span><select class="provider" id="1-provider" onchange="onProviderChange(this)"><option>?</option><option>MCD</option><option>OS</option></select></td></tr><tr><td class="select"><span id="2-tooth-redx" class="redx hide">&nbsp;</span><select class="tooth" id="2-tooth"><option>?</option><option></option><option>23</option><option>26</option><option>27</option><option>UA</option><option>LA</option></select></td><td>6010</td><td>Surgical placement of implant body</td><td class="select"><span id="2-visit-redx" class="redx hide">&nbsp;</span><select class="visit" id="2-visit"><option>?</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></td><td class="select"><span id="2-provider-redx" class="redx hide">&nbsp;</span><select class="provider" id="2-provider" onchange="onProviderChange(this)"><option>?</option><option>MCD</option><option>OS</option></select></td></tr><tr><td class="select"><span id="3-tooth-redx" class="redx hide">&nbsp;</span><select class="tooth" id="3-tooth"><option>?</option><option></option><option>23</option><option>26</option><option>27</option><option>UA</option><option>LA</option></select></td><td>6051</td><td>Interim abutment</td><td class="select"><span id="3-visit-redx" class="redx hide">&nbsp;</span><select class="visit" id="3-visit"><option>?</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></td><td class="select"><span id="3-provider-redx" class="redx hide">&nbsp;</span><select class="provider" id="3-provider" onchange="onProviderChange(this)"><option>?</option><option>MCD</option><option>OS</option></select></td></tr><tr><td class="select"><span id="4-tooth-redx" class="redx hide">&nbsp;</span><select class="tooth" id="4-tooth"><option>?</option><option></option><option>23</option><option>26</option><option>27</option><option>UA</option><option>LA</option></select></td><td>6085</td><td>Provisional implant crown</td><td class="select"><span id="4-visit-redx" class="redx hide">&nbsp;</span><select class="visit" id="4-visit"><option>?</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></td><td class="select"><span id="4-provider-redx" class="redx hide">&nbsp;</span><select class="provider" id="4-provider" onchange="onProviderChange(this)"><option>?</option><option>MCD</option><option>OS</option></select></td></tr><tr><td class="select"><span id="5-tooth-redx" class="redx hide">&nbsp;</span><select class="tooth" id="5-tooth"><option>?</option><option></option><option>23</option><option>26</option><option>27</option><option>UA</option><option>LA</option></select></td><td>300T</td><td>Crown impression</td><td class="select"><span id="5-visit-redx" class="redx hide">&nbsp;</span><select class="visit" id="5-visit"><option>?</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></td><td class="select"><span id="5-provider-redx" class="redx hide">&nbsp;</span><select class="provider" id="5-provider" onchange="onProviderChange(this)"><option>?</option><option>MCD</option><option>OS</option></select></td></tr><tr><td class="select"><span id="6-tooth-redx" class="redx hide">&nbsp;</span><select class="tooth" id="6-tooth"><option>?</option><option></option><option>23</option><option>26</option><option>27</option><option>UA</option><option>LA</option></select></td><td>6065</td><td>Implant supported porcelain/ceramic crown</td><td class="select"><span id="6-visit-redx" class="redx hide">&nbsp;</span><select class="visit" id="6-visit"><option>?</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option></select></td><td class="select"><span id="6-provider-redx" class="redx hide">&nbsp;</span><select class="provider" id="6-provider" onchange="onProviderChange(this)"><option>?</option><option>MCD</option><option>OS</option></select></td></tr></tbody>
		</table>
		<div class="buttonContainer">
			<button id="gradeButton">SUBMIT</button>
		</div>
	
	<script>

		var createRenderer = function(patientNum, data) {
			var o = {};
			o.data = data;
			o.patientNumber = patientNum;

			o.generateDDL = function(idx, name, data, onchange) {
				onchange = onchange || "";
				var str = '';
				str += '<span id="'+idx+'-'+name+'-redx" class="redx hide">&nbsp;</span>';
				str += '<select class="'+name+'" id="'+idx+'-'+name+'"';
				if(onchange) {
					str += ' onchange="'+onchange+'"';
				}
				str += '><option>?</option>';
				for(var i = 0; i < data.length; i++) {	
					str += '<option>'+data[i]+'</option>';
				}
				str += '</select>'
				return str;
			}

			o.render = function() {
				var b = document.getElementById('tableBody');
				var str = '';
				for(var x = 0; x < this.data.rows.length; x++) {
					str += '<tr>'
					str += '<td class="select">'+this.generateDDL(x, 'tooth', this.data.selectBoxes.tooth)+'</td>';
					str += '<td>'+this.data.rows[x][1]+'</td>';
					str += '<td>'+this.data.rows[x][2]+'</td>';
					str += '<td class="select">'+this.generateDDL(x, 'visit', this.data.selectBoxes.visit)+'</td>';
					str += '<td class="select">'+this.generateDDL(x, 'provider', this.data.selectBoxes.provider, 'onProviderChange(this)')+'</td>';
					str += '</tr>'
				}
				b.innerHTML = str;
			}

			o.grade = function() {
				var pass = true;
				for(var i = 0; i < this.data.rows.length; i++) {
					var row = this.data.rows[i];
					var tooth = document.getElementById(i + '-' + 'tooth');
					var visit = document.getElementById(i + '-' + 'visit');
					var provider = document.getElementById(i + '-' + 'provider');
					
					var toothVal = tooth.options[tooth.selectedIndex].value;
					var visitVal = visit.options[visit.selectedIndex].value;
					var providerVal = provider.options[provider.selectedIndex].value;

					var toothCorrect = (toothVal === row[0].toString()) 
					var visitCorrect = (visitVal === row[3].toString()) 
					var providerCorrect = (providerVal === row[4].toString());

					document.getElementById(i + '-' + 'tooth-redx').style.display = toothCorrect ? 'none' : 'inline-block';
					document.getElementById(i + '-' + 'visit-redx').style.display = visitCorrect ? 'none' : 'inline-block';
					document.getElementById(i + '-' + 'provider-redx').style.display = providerCorrect? 'none' : 'inline-block';

					pass = pass && (toothCorrect && visitCorrect && providerCorrect)
				}
				var p = parent.GetPlayer();
				p.SetVar('patient'+this.patientNumber+'Passed', pass);
				var attempts = +p.GetVar('patient'+this.patientNumber+'Attempts');
				p.SetVar('patient'+this.patientNumber+'Attempts', ++attempts);
				return pass;
			}

			return o;
		};

		var getJSON = function(url, cb) {
			// read text from URL location
			var request = new XMLHttpRequest();
			request.open('GET', url, true);
			request.send(null);
			request.onreadystatechange = function () {
				if (request.readyState === 4 && request.status === 200) {
					var type = request.getResponseHeader('Content-Type');
					try {
						cb(JSON.parse(request.responseText));
					}catch(err) {
						cb(err);
					}
				}
			}
		};

		window.providerReplciateCount = 0;
		window.onProviderChange = function(elem) {
			var idx = +elem.id.split('-')[0]
			if(idx === 0) {
				if(window.providerReplciateCount++ >0) {
					return;
				}
				value = elem.options[elem.selectedIndex].value;
				for(var i = 1; document.getElementById(i+'-provider'); ++i) {
					var provider = document.getElementById(i+'-provider');
					var opts = provider.options;
					for(var j = 0; j < opts.length; j++) {
						if(opts[j].value === value) {
							provider.selectedIndex = j;
							break;
						}
					}
				}
			}
		};

		document.addEventListener("DOMContentLoaded", function(){
			var patientNumber = +(+window.location.search.replace('?', ''));
			getJSON('patient'+patientNumber+'.json', function(data){
				window.roundtable = createRenderer(patientNumber, data);
				roundtable.render();
			});
		});

		document.getElementById('gradeButton').addEventListener("click", function(){
			window.roundtable.grade();
		});

	</script>

</body></html>
